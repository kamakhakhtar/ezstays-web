$(document).ready(function(){$(".call-back-form").on("submit",function(e){let a=!0,t=this.querySelector('input[name="name"]'),i=this.querySelector('input[name="phone"]');""===t.value.trim()?(t.classList.add("invalid"),a=!1):(t.value=t.value.replace(/^(.)|\s+(.)/g,e=>e.toUpperCase()),t.classList.remove("invalid")),""===i.value.trim()||10!=i.value.length?(i.classList.add("invalid"),a=!1):i.classList.remove("invalid"),a||e.preventDefault(),e.preventDefault();var n=$(this);n.prop("disabled",!0),n.html('<div class="progress-bar"></div>'),$(".progress-bar").css("animation","loading 2s linear forwards"),$(this).find('input[name="name"]').val(),$(this).find('input[name="phone"]').val();var l=`/send-email/${encodeURIComponent(`Call Back 
Name: ${t.value}
Phone: ${i.value}`)}`;setTimeout(function(){$.ajax({url:l,type:"GET",success:function(e){$(".modal").modal("hide"),n.html("Request a callback"),n.prop("disabled",!1),$("#thankyou .thankyou-title").text("Callback request sent successfully!"),$("#thankyou").modal("show")},error:function(e,a,t){n.html("Failed - Try Again"),n.prop("disabled",!1),alert("Error requesting callback: "+t)}})},3500)}),$(".schedule-form").on("submit",function(e){let a=!0,t=this.querySelector('input[name="name"]'),i=this.querySelector('input[name="phone"]');""===t.value.trim()?(t.classList.add("invalid"),a=!1):(t.value=t.value.replace(/^(.)|\s+(.)/g,e=>e.toUpperCase()),t.classList.remove("invalid")),""===i.value.trim()||10!=i.value.length?(i.classList.add("invalid"),a=!1):i.classList.remove("invalid"),a||e.preventDefault(),e.preventDefault();var n=$(this);n.prop("disabled",!0),n.html('<div class="progress-bar"></div>'),$(".progress-bar").css("animation","loading 2s linear forwards"),$("#sc-name").val(),$("#sc-phone").val();var l=`/send-email/${encodeURIComponent(`Schedule a Visit 
Name: ${t.value}
Phone: ${i.value}`)}`;setTimeout(function(){$.ajax({url:l,type:"GET",success:function(e){$(".modal").modal("hide"),n.html("Schedule a visit"),n.prop("disabled",!1),$("#thankyou .thankyou-title").text("Visit Scheduled Successfully!"),$("#thankyou").modal("show")},error:function(e,a,t){n.html("Failed - Try Again"),n.prop("disabled",!1),alert("Error scheduling visit: "+t)}})},3500)})}),document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){$("img.lazy-load").each(function(){var e=$(this);e.hide(),e.attr("src",e.attr("data-src")).removeAttr("data-src"),e.on("load",function(){e.fadeIn()})}),$.ajax({url:"/ajax/footer-urls/",type:"GET",dataType:"json",success:function(e){$("#footer-url-container").html(e.html)},error:function(){console.log("Error loading footer URLs")}}),$.ajax({url:"/ajax/get-cities/",type:"GET",dataType:"json",success:function(e){var a=$(".nice-select.location");a.empty(),e.cities.forEach(function(e){a.append(new Option(e.city,e.pk))}),a.niceSelect("update")},error:function(){console.error("Failed to load cities")}})},100)});

